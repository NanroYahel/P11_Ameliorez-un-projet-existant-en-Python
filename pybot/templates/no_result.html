<!DOCTYPE html>
<html>
	<head>
		<title>PyBot - Le papy Robot</title>
		
		<!-- For using bootstrap -->
		<link rel="stylesheet" type="text/css" href="static/css/bootstrap/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="static/css/style.css">
		<script src="https://d3js.org/d3.v5.min.js"></script>
	</head>

	<header>
		<h1>Analyse des requêtes sans résultat</h1>
	</header>

	<body>
		<div class="no_result_data">
			<!-- Display a table with the 10 last user requests with no result -->
			<h3 class="no_result">Dernières requêtes sans résultat</h3>
			<div class="row">
				<div class="no_result_data">

					<div class="col-lg-offset-1 col-lg-6 no_result_data">
						
						<table class="table">
							<thead>
							<tr>
								<th>Date</th>
								<th>Mots clés</th>
							</tr>
							</thead>
							<tbody>
								{% for entry in context['list_no_result'] %}
								<tr>
									<td>{{ entry.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
									<td>{{ entry.request }}</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

		<div class="no_result_graph">
			<!-- Display the graphic of Users Request with no result -->
			<h3 class="no_result">Nombre de requêtes sans résultat / Nombre de requêtes total</h3>
			<div class="row">
				<div class="col-lg-offset-5 col-lg-6">
					<p style="color:red;">Nombre de requêtes sans résultat : {{ context['total_no_result'] }}</p>
					<p>Nombre total de requêtes : {{ context['total_requests'] }}</p>
					<div class="graph"></div>
				</div>
			</div>
		</div>

		<script>
			//Get the datas abouts user request to use them in the js file.
			var data = [{{ context['total_no_result'] }}, {{ context['total_requests_valid'] }}];
		</script>
		<script type="text/javascript" src="static/js/graph.js"></script>
	</body>

</html>